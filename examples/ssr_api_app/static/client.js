function mn(t,n){return t<n?t:n}function zt(t,n){return t>n?t:n}function Y(t){return t===void 0?{MEL_PRIVATE_NESTED_SOME_NONE:0}:t!==null&&t.MEL_PRIVATE_NESTED_SOME_NONE!==void 0?{MEL_PRIVATE_NESTED_SOME_NONE:t.MEL_PRIVATE_NESTED_SOME_NONE+1|0}:t}function Mt(t){if(t!=null)return Y(t)}function w(t){if(!(t!==null&&t.MEL_PRIVATE_NESTED_SOME_NONE!==void 0))return t;let n=t.MEL_PRIVATE_NESTED_SOME_NONE;if(n!==0)return{MEL_PRIVATE_NESTED_SOME_NONE:n-1|0}}function dn(t){return t==null?!1:typeof t.MEL_EXN_ID=="string"}var p=(function(n,e){var r=e??{MEL_EXN_ID:n},_=Error.call(this,n,{cause:r});return _.cause==null&&Object.defineProperty(_,"cause",{configurable:!0,enumerable:!1,writable:!0,value:r}),Object.defineProperty(_,"name",{configurable:!0,enumerable:!1,writable:!0,value:"MelangeError"}),Object.assign(_,r),_});p.prototype=Error.prototype;function me(t){if(dn(t))return t;let n=new p("Js__Js_exn.Error/1");return n._1=t,n}var z=me;function gt(t,n){if(n>=t.length||n<0)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"index out of bounds"});return t.charCodeAt(n)}function At(t,n,e){let r=new Array(e),_=0,u=n;for(;_<e;)r[_]=t[u],_=_+1|0,u=u+1|0;return r}function $(t,n,e){if(n<0||n>=t.length)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"index out of bounds"});t[n]=e}function X(t,n){if(n<0||n>=t.length)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"index out of bounds"});return t[n]}function M(t,n){let e=new Array(t);for(let r=0;r<t;++r)e[r]=n;return e}function hn(t,n,e,r,_){if(r<=n){for(let u=0;u<_;++u)e[u+r|0]=t[u+n|0];return}for(let u=_-1|0;u>=0;--u)e[u+r|0]=t[u+n|0]}function Dt(t,n){for(;;){let e=n,r=t,_=r.length,u=_===0?1:_,c=e.length,d=u-c|0;if(d===0)return r.apply(null,e);if(d>=0)return function(g){return Dt(r,e.concat([g]))};n=At(e,u,-d|0),t=r.apply(null,At(e,0,u))}}function f(t,n){let e=t.length;if(e===1)return t(n);switch(e){case 1:return t(n);case 2:return function(r){return t(n,r)};case 3:return function(r,_){return t(n,r,_)};case 4:return function(r,_,u){return t(n,r,_,u)};case 5:return function(r,_,u,c){return t(n,r,_,u,c)};case 6:return function(r,_,u,c,d){return t(n,r,_,u,c,d)};case 7:return function(r,_,u,c,d,g){return t(n,r,_,u,c,d,g)};default:return Dt(t,[n])}}function N(t,n,e){let r=t.length;if(r===2)return t(n,e);switch(r){case 1:return Dt(t(n),[e]);case 2:return t(n,e);case 3:return function(_){return t(n,e,_)};case 4:return function(_,u){return t(n,e,_,u)};case 5:return function(_,u,c){return t(n,e,_,u,c)};case 6:return function(_,u,c,d){return t(n,e,_,u,c,d)};case 7:return function(_,u,c,d,g){return t(n,e,_,u,c,d,g)};default:return Dt(t,[n,e])}}function Pt(t){return t.length===2?t:function(e,r){return N(t,e,r)}}var pn=(function(t,n){for(var e in t)n(e)});function _t(t,n){if(t===n)return!0;let e=typeof t;if(e==="string"||e==="number"||e==="bigint"||e==="boolean"||e==="undefined"||t===null)return!1;let r=typeof n;if(e==="function"||r==="function")throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"equal: functional value"});if(r==="number"||r==="bigint"||r==="undefined"||n===null)return!1;let _=t.TAG,u=n.TAG;if(_===248)return t[1]===n[1];if(_===251)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"equal: abstract value"});if(_!==u)return!1;let c=t.length|0,d=n.length|0;if(c===d)if(Array.isArray(t)){let g=0;for(;;){let S=g;if(S===c)return!0;if(!_t(t[S],n[S]))return!1;g=S+1|0}}else{if(t instanceof Date&&n instanceof Date)return!(t>n||t<n);{let g={contents:!0},S=function(j){if(!Object.prototype.hasOwnProperty.call(n,j)){g.contents=!1;return}},T=function(j){if(!Object.prototype.hasOwnProperty.call(t,j)||!_t(n[j],t[j])){g.contents=!1;return}};return pn(t,S),g.contents&&pn(n,T),g.contents}}else return!1}var Lt=(function(t){return typeof process<"u"&&process.platform==="win32"?"Win32":"Unix"});function yn(t){if(typeof process>"u")return"";let n=process.argv;return n==null?"":n[0]}function Vt(t,n,e){if(n<0||n>=t.length)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"index out of bounds"});t[n]=e}function H(t){if(t<0)throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"String.create"});let n=new Array(t);for(let e=0;e<t;++e)n[e]=0;return n}function bt(t,n,e,r,_){if(_<=0)return;if(t===e){if(n<r){let S=(t.length-r|0)-1|0,T=_-1|0,j=S>T?T:S;for(let G=j;G>=0;--G)t[r+G|0]=t[n+G|0];return}if(n<=r)return;let c=(t.length-n|0)-1|0,d=_-1|0,g=c>d?d:c;for(let S=0;S<=g;++S)t[r+S|0]=t[n+S|0];return}let u=t.length-n|0;if(_<=u){for(let c=0;c<_;++c)e[r+c|0]=t[n+c|0];return}for(let c=0;c<u;++c)e[r+c|0]=t[n+c|0];for(let c=u;c<_;++c)e[r+c|0]=0}function st(t){let n=0,e=t.length,r="",_=e;if(n===0&&e<=4096&&e===t.length)return String.fromCharCode.apply(null,t);let u=0;for(;_>0;){let c=_<1024?_:1024,d=new Array(c);for(let g=0;g<c;++g)d[g]=t[g+u|0];r=r+String.fromCharCode.apply(null,d),_=_-c|0,u=u+c|0}return r}function Z(t,n,e,r,_){if(_<=0)return;let u=t.length-n|0;if(_<=u){for(let c=0;c<_;++c)e[r+c|0]=t.charCodeAt(n+c|0);return}for(let c=0;c<u;++c)e[r+c|0]=t.charCodeAt(n+c|0);for(let c=u;c<_;++c)e[r+c|0]=0}function Jt(t){let n=t.length,e=new Array(n);for(let r=0;r<n;++r)e[r]=t.charCodeAt(r);return e}function wn(t){return t>=65?t>=97?t>=123?-1:t-87|0:t>=91?-1:t-55|0:t>57||t<48?-1:t-48|0}function we(t){switch(t){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function ve(t){let n=1,e=2,r=0;switch(t.charCodeAt(r)){case 43:r=r+1|0;break;case 45:n=-1,r=r+1|0;break}if(t[r]==="0"){let u=t.charCodeAt(r+1|0);if(u>=89)if(u>=111){if(u<121)switch(u){case 111:e=0,r=r+2|0;break;case 117:r=r+2|0;break;case 112:case 113:case 114:case 115:case 116:case 118:case 119:break;case 120:e=1,r=r+2|0;break}}else u===98&&(e=3,r=r+2|0);else if(u!==66){if(u>=79)switch(u){case 79:e=0,r=r+2|0;break;case 85:r=r+2|0;break;case 80:case 81:case 82:case 83:case 84:case 86:case 87:break;case 88:e=1,r=r+2|0;break}}else e=3,r=r+2|0}return[r,n,e]}function vn(t){let n=ve(t),e=n[0],r=we(n[2]),_=4294967295,u=t.length,c=e<u?t.charCodeAt(e):0,d=wn(c);if(d<0||d>=r)throw new p("Failure",{MEL_EXN_ID:"Failure",_1:"int_of_string"});let g=function(j,G){for(;;){let V=G,ut=j;if(V===u)return ut;let dt=t.charCodeAt(V);if(dt===95){G=V+1|0;continue}let B=wn(dt);if(B<0||B>=r)throw new p("Failure",{MEL_EXN_ID:"Failure",_1:"int_of_string"});let et=r*ut+B;if(et>_)throw new p("Failure",{MEL_EXN_ID:"Failure",_1:"int_of_string"});G=V+1|0,j=et}},S=n[1]*g(d,e+1|0),T=S|0;if(r===10&&S!==T)throw new p("Failure",{MEL_EXN_ID:"Failure",_1:"int_of_string"});return T}function Ht(t){throw new p("Failure",{MEL_EXN_ID:"Failure",_1:t})}var xe="Failure";function Zt(t){try{return vn(t)}catch(n){let e=z(n);if(e.MEL_EXN_ID===xe)return;throw e}}var io=yn(),_o=Lt();var so=Lt()==="Unix",lo=Lt()==="Win32";var lt=2147483647,Sn=2147483647;var uo=Sn-2|0;function wt(t,n,e,r,_){if(_<0||n<0||n>(t.length-_|0)||r<0||r>(e.length-_|0))throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"Array.blit"});hn(t,n,e,r,_)}function W(t){let n=t.length-1|0,e=0;for(;;){let r=e,_=n;if(_<0)return r;e={hd:t[_],tl:r},n=_-1|0}}function I(t){return document}function xn(t,n){t.classList.add(n)}function kt(t){return window.location.pathname}function In(t){return window.history.pushState(null,"",t)}function Mn(t){return window.addEventListener("popstate",t)}function Qt(t,n){return W(t.querySelectorAll(n))}function L(t,n){return Mt(t.getElementById(n))}function Q(t,n){return Mt(t.querySelector(n))}function $n(t,n,e){t.setAttribute(n,e)}function tn(t,n){return Mt(t.getAttribute(n))}function E(t,n){t.innerHTML=n}function An(t,n,e){t.addEventListener(n,e)}function Dn(t){t.preventDefault()}function v(t){console.log(t)}var tt={fn:void 0,state:0,sources:[],source_slots:[],source_kinds:[],sources_len:0,value:void 0,updated_at:0,pure:!1,user:!1,owned:0,cleanups:0,owner:void 0,context:0,child_owners:0,memo_observers:void 0,memo_observer_slots:void 0,memo_observers_len:0,memo_comparator:void 0};function Tt(t){return{listener:void 0,owner:void 0,updates:M(128,tt),updates_len:0,effects:M(128,tt),effects_len:0,exec_count:0,in_update:!1}}function P(t){let n=0,e=t;for(;;){let r=e,_=n;if(!r)return _;e=r.tl,n=_+1|0}}function Ne(t,n){for(;;){let e=n,r=t;if(!r)return e;n={hd:r.hd,tl:e},t=r.tl}}function en(t){return Ne(t,0)}function je(t,n,e,r){for(;;){let _=t,u=n,c=r;if(!c){_[u]=0;return}let d=c.tl,g=c.hd;if(d){let T=f(e,g),G={hd:f(e,d.hd),tl:24029};_[u]={hd:T,tl:G},r=d.tl,n="tl",t=G;continue}let S=f(e,g);_[u]={hd:S,tl:0};return}}function nt(t,n){if(!n)return 0;let e=n.tl,r=n.hd;if(e){let u=f(t,r),d={hd:f(t,e.hd),tl:24029};return{hd:u,tl:(je(d,"tl",t,e.tl),d)}}return{hd:f(t,r),tl:0}}function ft(t,n){for(;;){let e=n;if(!e)return;f(t,e.hd),n=e.tl}}function Nn(t,n){for(;;){let e=n;if(!e)return;let r=e.hd;if(_t(r[0],t))return Y(r[1]);n=e.tl}}function ke(t,n){for(;;){let e=n;if(!e)return 0;let r=e.tl,_=e.hd;if(f(t,_)){let u={hd:_,tl:24029};return Te(u,"tl",t,r),u}n=r}}function Te(t,n,e,r){for(;;){let _=t,u=n,c=r;if(!c){_[u]=0;return}let d=c.tl,g=c.hd;if(f(e,g)){let S={hd:g,tl:24029};_[u]=S,r=d,n="tl",t=S;continue}r=d}}var jn=ke;function kn(t){let n=function(o){let s=f(t.get_runtime,void 0);return s!==void 0?s:Ht("No reactive runtime active. Use Runtime.run or create_root.")},e=function(o){return f(t.get_runtime,void 0)},r=function(o){f(t.set_runtime,o)},_=function(o,s,i,l){let a=o.length;if(a>=i)return o;let m=zt(i,a<<1),h=M(m,l);return wt(o,0,h,0,s),h},u=function(o,s,i){let l=o.length;if(l>=i)return o;let a=zt(i,l<<1),m=M(a,0);return wt(o,0,m,0,s),m},c=function(o,s){if(!s)return;let i=s.tl,l=s.hd;if(!i)return f(o,l);let a=i.tl,m=i.hd;return a?a.tl?ft(o,en(s)):(f(o,a.hd),f(o,m),f(o,l)):(f(o,m),f(o,l))},d=function(o,s){let i=o.updates_len,l=o.updates;if(i>=l.length){let a=i<64?2:1.5,m=i*a|0,h=M(m,tt);wt(l,0,h,0,i),o.updates=h}o.updates[i]=s,o.updates_len=i+1|0},g=function(o,s){let i=o.effects_len,l=o.effects;if(i>=l.length){let a=i<64?2:1.5,m=i*a|0,h=M(m,tt);wt(l,0,h,0,i),o.effects=h}o.effects[i]=s,o.effects_len=i+1|0},S={contents:(function(o){})},T={contents:(function(o){})},j=function(o){let i=n().listener;if(i!==void 0){let l=o.observers_len;i.sources_len===0?(i.sources=M(4,o),i.source_slots=M(4,l),i.source_kinds=M(4,0),i.sources_len=1):(i.sources=_(i.sources,i.sources_len,i.sources_len+1|0,o),i.source_slots=_(i.source_slots,i.sources_len,i.sources_len+1|0,0),i.source_kinds=u(i.source_kinds,i.sources_len,i.sources_len+1|0),$(i.sources,i.sources_len,o),$(i.source_slots,i.sources_len,l),$(i.source_kinds,i.sources_len,0),i.sources_len=i.sources_len+1|0),o.observers_len===0?(o.observers=M(4,i),o.observer_slots=M(4,i.sources_len-1|0),o.observers_len=1):(o.observers=_(o.observers,o.observers_len,o.observers_len+1|0,tt),o.observer_slots=_(o.observer_slots,o.observers_len,o.observers_len+1|0,0),$(o.observers,o.observers_len,i),$(o.observer_slots,o.observers_len,i.sources_len-1|0),o.observers_len=o.observers_len+1|0)}return o.sig_value},G=function(o){let i=n().listener;if(i!==void 0&&o.memo_observers!==void 0){let l=o.memo_observers_len;i.sources_len===0?(i.sources=M(4,o),i.source_slots=M(4,l),i.source_kinds=M(4,1),i.sources_len=1):(i.sources=_(i.sources,i.sources_len,i.sources_len+1|0,o),i.source_slots=_(i.source_slots,i.sources_len,i.sources_len+1|0,0),i.source_kinds=u(i.source_kinds,i.sources_len,i.sources_len+1|0),$(i.sources,i.sources_len,o),$(i.source_slots,i.sources_len,l),$(i.source_kinds,i.sources_len,1),i.sources_len=i.sources_len+1|0);let a=o.memo_observers,m=a!==void 0?a:[],h=o.memo_observer_slots,y=h!==void 0?h:[];if(o.memo_observers_len===0)o.memo_observers=M(4,i),o.memo_observer_slots=M(4,i.sources_len-1|0),o.memo_observers_len=1;else{let b=_(m,o.memo_observers_len,o.memo_observers_len+1|0,tt),x=_(y,o.memo_observers_len,o.memo_observers_len+1|0,0);$(b,o.memo_observers_len,i),$(x,o.memo_observers_len,i.sources_len-1|0),o.memo_observers=b,o.memo_observer_slots=x,o.memo_observers_len=o.memo_observers_len+1|0}}return o.value},V=function(o){let s=n(),i=o.memo_observers;if(i!==void 0)for(let l=0,a=o.memo_observers_len;l<a;++l){let m=X(i,l);m.state===0&&(m.state=2,m.pure?d(s,m):g(s,m),m.memo_observers!==void 0&&V(m))}},ut={contents:(function(o,s){f(o,void 0)})},dt=function(o,s){let i=o.comparator;if(!(i!==void 0?!N(i,o.sig_value,s):o.sig_value!==s)||(o.sig_value=s,o.observers_len<=0))return;let a=n();N(ut.contents,(function(m){let h=o.observers,y=o.observers_len;for(let b=0;b<y;++b){let x=h[b];x.state===0&&(x.pure?d(a,x):g(a,x),x.memo_observers!==void 0&&V(x)),x.state=1}}),!1)},B=function(o){for(let s=0,i=o.sources_len;s<i;++s){let l=X(o.sources,s),a=X(o.source_slots,s);if(X(o.source_kinds,s)===0){if(l.observers_len>0){let h=l.observers_len-1|0;if(a<h){let y=X(l.observers,h),b=X(l.observer_slots,h);$(l.observers,a,y),$(l.observer_slots,a,b),$(y.source_slots,b,a)}l.observers_len=l.observers_len-1|0}}else{let h=l.memo_observers;if(h!==void 0&&l.memo_observers_len>0){let y=l.memo_observers_len-1|0;if(a<y){let b=X(h,y),x=l.memo_observer_slots,k=x!==void 0?x:Ht("memo_observer_slots should exist"),ct=X(k,y);$(h,a,b),$(k,a,ct),$(b.source_slots,ct,a)}l.memo_observers_len=l.memo_observers_len-1|0}}}o.sources_len=0,c((function(s){f(T.contents,s)}),o.child_owners),o.child_owners=0,ft((function(s){f(S.contents,s)}),o.owned),o.owned=0,c((function(s){f(s,void 0)}),o.cleanups),o.cleanups=0,o.state=0};S.contents=B;let et=function(o){let s=n(),i=o.fn;if(i===void 0)return;let l=s.listener,a=s.owner,m={o_owned:0,o_cleanups:0,o_parent:o.owner,o_context:o.context,o_child_owners:0};s.listener=o,s.owner=m;try{let h=f(i,o.value);o.value=h,o.updated_at=s.exec_count,o.owned=m.o_owned,o.cleanups=m.o_cleanups,o.child_owners=m.o_child_owners}catch(h){throw o.owned=m.o_owned,o.cleanups=m.o_cleanups,o.child_owners=m.o_child_owners,s.listener=l,s.owner=a,h}s.listener=l,s.owner=a},qt=function(o){if(o.fn!==void 0)return B(o),et(o)},Wn=function(o){o.state=0},rt=function(o){if(o.state!==0)if(o.state===2){o.state=0;return}else return qt(o)},ln=function(o){let s=n(),i;for(;;){if(!(s.updates_len>0||s.effects_len>0))return;for(;s.updates_len>0;){let m=s.updates_len,h=s.updates;s.updates_len=0;for(let y=0;y<m;++y){let b=h[y];try{rt(b)}catch(x){let k=z(x);N(t.handle_error,k,"memo")}}}let l=s.effects_len,a=s.effects;s.effects_len=0;for(let m=0;m<l;++m){let h=a[m];if(!h.user)try{rt(h)}catch(y){let b=z(y);N(t.handle_error,b,"effect")}}for(let m=0;m<l;++m){let h=a[m];if(h.user)try{rt(h)}catch(y){let b=z(y);N(t.handle_error,b,"effect")}}i=void 0}},ht=function(o,s){let i=n();if(i.in_update)return f(o,void 0);i.in_update=!0,i.exec_count=i.exec_count+1|0,s||(i.updates_len=0,i.effects_len=0);let l;try{let a=f(o,void 0);ln(),l=a}catch(a){throw i.in_update=!1,i.updates_len=0,i.effects_len=0,a}return i.in_update=!1,l};ut.contents=ht;let pt=function(o,s,i,l){let a=n(),m=a.owner,h={fn:o,state:l,sources:[],source_slots:[],source_kinds:[],sources_len:0,value:s,updated_at:0,pure:i,user:!1,owned:0,cleanups:0,owner:a.owner,context:m!==void 0?m.o_context:0,child_owners:0,memo_observers:void 0,memo_observer_slots:void 0,memo_observers_len:0,memo_comparator:void 0},y=a.owner;return y!==void 0&&(y.o_owned={hd:h,tl:y.o_owned}),h},un=function(o){let s=Tt(),i=f(t.get_runtime,void 0);f(t.set_runtime,s);let l;try{l=f(o,void 0)}catch(a){throw f(t.set_runtime,i),a}return f(t.set_runtime,i),l},xt=function(o){c(xt,o.o_child_owners),o.o_child_owners=0,ft((function(i){i.fn=void 0,B(i)}),o.o_owned),o.o_owned=0,c((function(i){f(i,void 0)}),o.o_cleanups),o.o_cleanups=0;let s=o.o_parent;if(s!==void 0){s.o_child_owners=jn((function(i){return i!==o}),s.o_child_owners);return}};T.contents=xt;let Bt=function(o){let s=n(),i=s.owner,l={o_owned:0,o_cleanups:0,o_parent:i,o_context:i!==void 0?i.o_context:0,o_child_owners:0};i!==void 0&&(i.o_child_owners={hd:l,tl:i.o_child_owners}),s.owner=l;let a=function(m){xt(l)};try{let m=f(o,a);return s.owner=i,m}catch(m){throw s.owner=i,m}},cn=function(o){let i=n().owner;if(i!==void 0){i.o_cleanups={hd:o,tl:i.o_cleanups};return}},Qn=function(o){return n().owner},te=function(o){let s=n(),i=s.listener;s.listener=void 0;let l;try{l=f(o,void 0)}catch(a){throw s.listener=i,a}return s.listener=i,l},an=function(o,s){return{sig_value:s,observers:[],observer_slots:[],observers_len:0,comparator:o}},ne=function(o,s){let i=o!==void 0?Pt(o):void 0;return an(i,s)},ee=j,re=dt,oe=function(o){return o.sig_value},ie=function(o,s){let i=o!==void 0?o:_t,l={contents:void 0},a=pt((function(h){let y=f(s,void 0),b=l.contents;if(b!==void 0)if(b.has_cached&&!N(b.equals,b.cached,y)){b.cached=y;let x=n(),k=b.comp.memo_observers;if(k!==void 0)for(let ct=0,fe=b.comp.memo_observers_len;ct<fe;++ct){let ot=X(k,ct);ot.state===0?(ot.state=1,ot.pure?d(x,ot):g(x,ot)):ot.state===2&&(ot.state=1)}}else b.cached=y,b.has_cached=!0;return y}),void 0,!0,1);a.memo_observers=[],a.memo_observer_slots=[];let m={comp:a,cached:void 0,has_cached:!1,equals:i};return l.contents=m,qt(a),m},_e=function(o){let s=o.comp;s.state===1?(B(s),et(s),s.state=0):s.state===2&&(s.state=0,s.state===1&&(B(s),et(s),s.state=0));let l=n().listener;if(l!==void 0){let a=s.memo_observers_len;l.sources_len===0?(l.sources=M(4,s),l.source_slots=M(4,a),l.source_kinds=M(4,1),l.sources_len=1):(l.sources=_(l.sources,l.sources_len,l.sources_len+1|0,s),l.source_slots=_(l.source_slots,l.sources_len,l.sources_len+1|0,0),l.source_kinds=u(l.source_kinds,l.sources_len,l.sources_len+1|0),$(l.sources,l.sources_len,s),$(l.source_slots,l.sources_len,a),$(l.source_kinds,l.sources_len,1),l.sources_len=l.sources_len+1|0);let m=s.memo_observers,h=m!==void 0?m:[],y=s.memo_observer_slots,b=y!==void 0?y:[];if(s.memo_observers_len===0)s.memo_observers=M(4,l),s.memo_observer_slots=M(4,l.sources_len-1|0),s.memo_observers_len=1;else{let x=_(h,s.memo_observers_len,s.memo_observers_len+1|0,tt),k=_(b,s.memo_observers_len,s.memo_observers_len+1|0,0);$(x,s.memo_observers_len,l),$(k,s.memo_observers_len,l.sources_len-1|0),s.memo_observers=x,s.memo_observer_slots=k,s.memo_observers_len=s.memo_observers_len+1|0}}return o.cached},se=function(o){return o.cached},le=function(o){let s=pt((function(l){f(o,void 0)}),void 0,!1,1);s.user=!0;let i=n();return i.in_update?g(i,s):ht((function(l){rt(s)}),!0)},ue=function(o){let s={contents:(function(a){})},i=pt((function(a){f(s.contents,void 0);let m=f(o,void 0);s.contents=m}),void 0,!1,1);i.user=!0,cn(function(a){f(s.contents,void 0)});let l=n();return l.in_update?g(l,i):ht((function(a){rt(i)}),!0)},ce=function(o,s){let i={contents:!0},l=pt((function(m){let h=f(o,void 0);i.contents?i.contents=!1:f(s,h)}),void 0,!1,1);l.user=!0;let a=n();return a.in_update?g(a,l):ht((function(m){rt(l)}),!0)},It={contents:0},ae=function(o){let s=It.contents;return It.contents=It.contents+1|0,{ctx_id:s,ctx_default:o}},fn=function(o,s){for(;;){let i=s,l=Nn(o,i.o_context);if(l!==void 0)return Y(w(l));let a=i.o_parent;if(a===void 0)return;s=a}};return{get_runtime:n,get_runtime_opt:e,set_runtime:r,ensure_capacity:_,ensure_capacity_kinds:u,iter_rev:c,push_update:d,push_effect:g,clean_node_ref:S,dispose_owner_ref:T,read_signal:j,read_memo:G,mark_downstream:V,run_updates_ref:ut,write_signal:dt,clean_node:B,run_computation:et,update_computation:qt,look_upstream:Wn,run_top:rt,complete_updates:ln,run_updates:ht,create_computation:pt,run:un,dispose_owner:xt,create_root:Bt,on_cleanup:cn,get_owner:Qn,untrack:te,create_signal_internal:an,create_typed_signal:ne,read_typed_signal:ee,write_typed_signal:re,peek_typed_signal:oe,create_typed_memo:ie,read_typed_memo:_e,peek_typed_memo:se,create_effect:le,create_effect_with_cleanup:ue,create_effect_deferred:ce,next_context_id:It,create_context:ae,find_context_in_owner:fn,use_context:function(o){let s=f(t.get_runtime,void 0);if(s===void 0)return o.ctx_default;let i=s.owner;if(i===void 0)return o.ctx_default;let l=fn(o.ctx_id,i);return l!==void 0?w(l):o.ctx_default},provide_context:function(o,s,i){let l=f(t.get_runtime,void 0);if(l===void 0)return un(function(y){return Bt(function(b){let k=n().owner;return k!==void 0?(k.o_context={hd:[o.ctx_id,s],tl:k.o_context},f(i,void 0)):f(i,void 0)})});let a=l.owner;if(a===void 0)return Bt(function(y){let x=n().owner;return x!==void 0?(x.o_context={hd:[o.ctx_id,s],tl:x.o_context},f(i,void 0)):f(i,void 0)});let m=a.o_context;a.o_context={hd:[o.ctx_id,s],tl:m};let h;try{h=f(i,void 0)}catch(y){throw a.o_context=m,y}return a.o_context=m,h}}}var Xe=(function(t){if(t&&t.MEL_EXN_ID){var n=t.MEL_EXN_ID;return t._1!==void 0&&(n+=": "+String(t._1)),n}else return t instanceof Error?t.message||t.toString():String(t)}),on={contents:void 0};function Oe(t){return on.contents}function Fe(t){on.contents=t}function qe(t,n){console.error("solid-ml: Error in "+(n+(": "+Xe(t))))}var Be={get_runtime:Oe,set_runtime:Fe,handle_error:qe},D=kn(Be),Ao=D.write_typed_signal,Do=D.peek_typed_signal;function Tn(t){if(f(D.get_runtime_opt,void 0)!==void 0)return f(D.create_root,(function(r){return[f(t,void 0),r]}));let e=Tt();return on.contents=e,f(D.create_root,(function(r){return[f(t,void 0),r]}))}var Lo=D.create_typed_signal,No=D.read_typed_signal,jo=D.create_effect,ko=D.create_effect_with_cleanup,To=D.create_effect_deferred,Go=D.untrack,Xo=D.create_typed_memo,Oo=D.read_typed_memo,Fo=D.peek_typed_memo,qo=D.on_cleanup,Bo=D.get_owner;var zo=D.create_context,Po=D.use_context,Ro=D.provide_context;function Xt(t,n,e){if(n<0||e<0||n>(t.length-e|0))throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"String.sub / Bytes.sub"});let r=H(e);return bt(t,n,r,0,e),r}function On(t,n,e){return st(Xt(t,n,e))}function Fn(t,n,e,r,_){if(_<0||n<0||n>(t.length-_|0)||r<0||r>(e.length-_|0))throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"Bytes.blit"});bt(t,n,e,r,_)}function _n(t,n,e,r,_){if(_<0||n<0||n>(t.length-_|0)||r<0||r>(e.length-_|0))throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"String.blit / Bytes.blit_string"});Z(t,n,e,r,_)}function R(t,n,e){return n===0&&t.length===e?t:st(Xt(Jt(t),n,e))}function sr(t,n){if(t>=n)return t;throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"String.concat"})}function lr(t,n,e){for(;;){let r=e,_=t;if(!r)return _;let u=r.hd;if(!r.tl)return u.length+_|0;e=r.tl,t=sr((u.length+n|0)+_|0,_)}}function ur(t,n,e,r,_){for(;;){let u=_,c=n;if(!u)return t;let d=u.hd;if(u.tl){Z(d,0,t,c,d.length),Z(e,0,t,c+d.length|0,r),_=u.tl,n=(c+d.length|0)+r|0;continue}return Z(d,0,t,c,d.length),t}}function Ot(t,n){if(!n)return"";if(!n.tl)return n.hd;let e=t.length;return st(ur(H(lr(0,e,n)),0,t,e,n))}function Bn(t,n){for(let e=0,r=n.length;e<r;++e)f(t,n.charCodeAt(e))}function Pn(t){let n=t<1?1:t,e=n>lt?lt:n,r=H(e);return{inner:{buffer:r,length:e},position:0,initial_buffer:r}}function Rn(t){return On(t.inner.buffer,0,t.position)}function Un(t,n){let e=t.position,_=t.inner.length;for(;(e+n|0)>_;)_=_<<1;if(_>lt)if((e+n|0)<=lt)_=lt;else throw new p("Failure",{MEL_EXN_ID:"Failure",_1:"Buffer.add: cannot grow buffer"});let u=H(_);Fn(t.inner.buffer,0,u,0,t.position),t.inner={buffer:u,length:_}}function Ft(t,n){let e=t.position,r=t.inner;e>=r.length?(Un(t,1),Vt(t.inner.buffer,t.position,n)):r.buffer[e]=n,t.position=e+1|0}function cr(t,n,e,r){if(e<0||r<0||e>(n.length-r|0))throw new p("Invalid_argument",{MEL_EXN_ID:"Invalid_argument",_1:"Buffer.add_substring"});let _=t.position,u=t.inner,c=_+r|0;c>u.length?(Un(t,r),_n(n,e,t.inner.buffer,t.position,r)):Z(n,e,u.buffer,_,r),t.position=c}function vt(t,n){cr(t,n,0,n.length)}function Wi(t){return L(I(),t)}function Qi(t){return Q(I(),t)}function t_(t){return Qt(I(),t)}var mt=(function(t,n,e){fetch(t).then(function(r){return r.json()}).then(function(r){n(JSON.stringify(r))}).catch(function(r){e(r.message||"Fetch failed")})}),F=(function(t,n){try{var e=JSON.parse(t);return e[n]||""}catch{return""}}),Et=(function(t,n){try{var e=JSON.parse(t);return e[n]||0}catch{return 0}}),St=(function(t,n){try{var e=JSON.parse(t);return e.map(function(r){return n(JSON.stringify(r))})}catch{return[]}});function n_(t,n){return W(St(t,n))}function Vn(t){return{id:Et(t,"id"),name:F(t,"name"),username:F(t,"username"),email:F(t,"email"),phone:F(t,"phone"),website:F(t,"website"),company:F(t,"company"),city:F(t,"city")}}function sn(t){return{id:Et(t,"id"),user_id:Et(t,"userId"),title:F(t,"title"),body:F(t,"body")}}function fr(t){return{id:Et(t,"id"),post_id:Et(t,"postId"),name:F(t,"name"),email:F(t,"email"),body:F(t,"body")}}function mr(t,n){mt("/api/users",(function(e){f(t,nt(Vn,W(St(e,(function(r){return r})))))}),n)}function Jn(t,n,e){mt("/api/users/"+String(t),(function(r){f(n,Vn(r))}),e)}function dr(t,n,e){mt("/api/users/"+(String(t)+"/posts"),(function(r){f(n,nt(sn,W(St(r,(function(_){return _})))))}),e)}function hr(t,n){mt("/api/posts",(function(e){f(t,nt(sn,W(St(e,(function(r){return r})))))}),n)}function pr(t,n,e){mt("/api/posts/"+String(t),(function(r){f(n,sn(r))}),e)}function gr(t,n,e){mt("/api/posts/"+(String(t)+"/comments"),(function(r){f(n,nt(fr,W(St(r,(function(_){return _})))))}),e)}function C(t){let n=Pn(t.length);return Bn((function(e){if(e===34)return vt(n,"&quot;");if(e<60)return e!==38?Ft(n,e):vt(n,"&amp;");if(e>=63)return Ft(n,e);switch(e){case 60:return vt(n,"&lt;");case 61:return Ft(n,e);case 62:return vt(n,"&gt;")}}),t),Rn(n)}function yr(t,n){let r=(t!==void 0?t:!0)?"Post #"+(String(n.id)+(' by <a href="/users/'+(String(n.user_id)+('">User #'+(String(n.user_id)+"</a>"))))):"Post #"+String(n.id);return`<div class="card">
    <h3><a href="/posts/`+(String(n.id)+('">'+(C(n.title)+(`</a></h3>
    <p>`+(C(R(n.body,0,mn(120,n.body.length)))+(`...</p>
    <div class="meta">`+(r+`</div>
  </div>`)))))))}function Yn(t,n){let r=t!==void 0?t:!0;return Ot(`
`,nt((function(_){return yr(r,_)}),n))}function br(t){return`<div class="card user-card">
    <div class="avatar">`+((t.name.length!==0?R(t.name,0,1):"?")+(`</div>
    <div class="info">
      <h3><a href="/users/`+(String(t.id)+('">'+(C(t.name)+(`</a></h3>
      <p class="username">@`+(C(t.username)+(`</p>
      <div class="details">`+(C(t.email)+(" \xC2\xB7 "+(C(t.city)+`</div>
    </div>
  </div>`)))))))))))}function Cr(t){return Ot(`
`,nt(br,t))}function wr(t){return`<div class="comment">
    <div class="author">`+(C(t.name)+(`</div>
    <div class="email">`+(C(t.email)+(`</div>
    <div class="body">`+(C(t.body)+`</div>
  </div>`)))))}function vr(t){return Ot(`
`,nt(wr,t))}function e_(t){return'<div class="loading">Loading...</div>'}function U(t){return'<div class="error"><h2>Error</h2><p>'+(C(t)+"</p></div>")}function Hn(t){let n=function(e){if(!e)return"";let r=e.hd,_=r[1],u=r[0];if(_!==void 0)return'<a href="'+(_+('">'+(C(u)+('</a><span class="separator"> / </span>'+n(e.tl)))));let c=e.tl;return c?'<span class="current">'+(C(u)+('</span><span class="separator"> / </span>'+n(c))):'<span class="current">'+(C(u)+"</span>")};return'<div class="breadcrumb">'+(n(t)+"</div>")}function r_(t){return'<div id="hydration-status" class="hydration-status active">Client-side navigation active.</div>'}var Zn={contents:kt()};function q(t){let n=Qt(I(),"a[href^='/']");ft((function(e){if(tn(e,"data-setup")===void 0)return $n(e,"data-setup","true"),An(e,"click",(function(_){let u=tn(e,"href");if(u!==void 0&&u.length!==0&&gt(u,0)===47)return Dn(_),Er(u)}))}),n)}function Er(t){v("Navigating to: "+t),Zn.contents=t,In(t),Kn(t)}function Kn(t){v("Rendering page: "+t);let n=L(I(),"app");if(n!==void 0){let e=w(n);if(t==="/")return Sr(e);if(t==="/users")return xr(e);if(t.length>7&&R(t,0,7)==="/posts/"){let u=R(t,7,t.length-7|0),c=Zt(u);return c!==void 0?Mr(e,c):E(e,U("Invalid post ID"))}if(!(t.length>7&&R(t,0,7)==="/users/"))return E(e,U("Page not found: "+t));let r=R(t,7,t.length-7|0),_=Zt(r);return _!==void 0?Ir(e,_):E(e,U("Invalid user ID"))}v("Error: #app element not found")}function Sr(t){v("Rendering posts page..."),E(t,`<div class="section-title">
      <h2>Recent Posts</h2>
      <span class="count">Loading...</span>
    </div>
    <p>Click on a post to view details and comments, or click on a user to see their profile.</p>
    <div id="content-list"><div class="loading">Loading...</div></div>
    <div id="hydration-status" class="hydration-status active">Client-side navigation active.</div>`),q(),hr((function(n){v("Fetched "+(String(P(n))+" posts"));let e=L(I(),"content-list");if(e===void 0)return v("Error: content-list not found");v("Found content-list, updating..."),E(w(e),Yn(!0,n));let r=Q(I(),".section-title .count");r!==void 0&&E(w(r),String(P(n))+" posts"),q()}),(function(n){v("Error fetching posts: "+n);let e=L(I(),"content-list");if(e!==void 0)return E(w(e),U("Failed to load posts: "+n))}))}function xr(t){v("Rendering users page..."),E(t,`<div class="section-title">
      <h2>All Users</h2>
      <span class="count">Loading...</span>
    </div>
    <p>Click on a user to view their profile and posts.</p>
    <div id="content-list"><div class="loading">Loading...</div></div>
    <div id="hydration-status" class="hydration-status active">Client-side navigation active.</div>`),q(),mr((function(n){v("Fetched "+(String(P(n))+" users"));let e=L(I(),"content-list");if(e===void 0)return v("Error: content-list not found");E(w(e),Cr(n));let r=Q(I(),".section-title .count");r!==void 0&&E(w(r),String(P(n))+" users"),q()}),(function(n){v("Error fetching users: "+n);let e=L(I(),"content-list");if(e!==void 0)return E(w(e),U("Failed to load users: "+n))}))}function Ir(t,n){v("Rendering user page for ID: "+String(n)),E(t,Hn({hd:["Users","/users"],tl:{hd:["Loading...",void 0],tl:0}})+`<div id="user-profile"><div class="loading">Loading...</div></div>
    <div class="detail-section" id="user-posts">
      <div class="section-title">
        <h3>Posts</h3>
        <span class="count">Loading...</span>
      </div>
      <div id="content-list"><div class="loading">Loading...</div></div>
    </div>
    <div id="hydration-status" class="hydration-status active">Client-side navigation active.</div>`),q(),Jn(n,(function(e){v("Fetched user: "+e.name);let r=e.name.length!==0?R(e.name,0,1):"?",_=Q(I(),".breadcrumb");_!==void 0&&E(w(_),'<a href="/users">Users</a><span class="separator"> / </span><span class="current">'+(C(e.name)+"</span>"));let u=L(I(),"user-profile");if(u!==void 0)return E(w(u),`<div class="user-profile">
            <div class="avatar">`+(r+(`</div>
            <div class="info">
              <h2>`+(C(e.name)+(`</h2>
              <p class="username">@`+(C(e.username)+(`</p>
              <div class="details">
                <span>Email: `+(C(e.email)+(`</span>
                <span>Phone: `+(C(e.phone)+(`</span>
                <span>Website: <a href="https://`+(C(e.website)+('" target="_blank">'+(C(e.website)+(`</a></span>
                <span>Location: `+(C(e.city)+(`</span>
                <span>Company: `+(C(e.company)+`</span>
              </div>
            </div>
          </div>`)))))))))))))))))),q()}),(function(e){v("Error fetching user: "+e);let r=L(I(),"user-profile");if(r!==void 0)return E(w(r),U("Failed to load user: "+e))})),dr(n,(function(e){v("Fetched "+(String(P(e))+" posts for user"));let r=L(I(),"content-list");if(r===void 0)return v("Error: content-list not found");E(w(r),Yn(!1,e));let _=Q(I(),"#user-posts .count");_!==void 0&&E(w(_),String(P(e))+" posts"),q()}),(function(e){v("Error fetching user posts: "+e);let r=L(I(),"content-list");if(r!==void 0)return E(w(r),U("Failed to load posts: "+e))}))}function Mr(t,n){v("Rendering post page for ID: "+String(n)),E(t,Hn({hd:["Posts","/"],tl:{hd:["Loading...",void 0],tl:0}})+`<div class="detail-section" id="post-detail"><div class="loading">Loading...</div></div>
    <div class="comments-section" id="comments-section">
      <div class="section-title">
        <h3>Comments</h3>
        <span class="count">Loading...</span>
      </div>
      <div id="comments-list"><div class="loading">Loading...</div></div>
    </div>
    <div id="hydration-status" class="hydration-status active">Client-side navigation active.</div>`),q(),pr(n,(function(e){v("Fetched post: "+e.title);let r=Q(I(),".breadcrumb");r!==void 0&&E(w(r),'<a href="/">Posts</a><span class="separator"> / </span><span class="current">'+(C(e.title)+"</span>")),Jn(e.user_id,(function(_){let u=L(I(),"post-detail");if(u!==void 0)return E(w(u),"<h2>"+(C(e.title)+(`</h2>
              <div class="meta">By <a href="/users/`+(String(_.id)+('">'+(C(_.name)+("</a> (@"+(C(_.username)+(`)</div>
              <div class="body">`+(C(e.body)+"</div>")))))))))),q()}),(function(_){let u=L(I(),"post-detail");if(u!==void 0)return E(w(u),"<h2>"+(C(e.title)+(`</h2>
              <div class="meta">By <a href="/users/`+(String(e.user_id)+('">User #'+(String(e.user_id)+(`</a></div>
              <div class="body">`+(C(e.body)+"</div>")))))))),q()}))}),(function(e){v("Error fetching post: "+e);let r=L(I(),"post-detail");if(r!==void 0)return E(w(r),U("Failed to load post: "+e))})),gr(n,(function(e){v("Fetched "+(String(P(e))+" comments"));let r=L(I(),"comments-list");if(r===void 0)return v("Error: comments-list not found");E(w(r),vr(e));let _=Q(I(),"#comments-section .count");if(_!==void 0)return E(w(_),String(P(e))+" comments")}),(function(e){v("Error fetching comments: "+e);let r=L(I(),"comments-list");if(r!==void 0)return E(w(r),U("Failed to load comments: "+e))}))}function $r(t){Mn(function(n){let e=kt();v("Popstate event, path: "+e),Zn.contents=e,Kn(e)}),q()}Tn(function(t){let n=kt();v("Hydrating page: "+n),$r();let e=L(I(),"hydration-status");e!==void 0&&xn(w(e),"active"),v("Hydration complete!")});export{Zn as current_path,gr as fetch_comments,mt as fetch_json_raw,pr as fetch_post,hr as fetch_posts,Jn as fetch_user,dr as fetch_user_posts,mr as fetch_users,Wi as get_element,C as html_escape,n_ as json_array_map,St as json_array_map_raw,Et as json_get_int,F as json_get_string,Er as navigate,fr as parse_comment,sn as parse_post,Vn as parse_user,Qi as query_selector,t_ as query_selector_all,Hn as render_breadcrumb,wr as render_comment,vr as render_comments,U as render_error,r_ as render_hydration_status,e_ as render_loading,Kn as render_page,yr as render_post_card,Mr as render_post_page,Yn as render_posts_list,Sr as render_posts_page,br as render_user_card,Ir as render_user_page,Cr as render_users_list,xr as render_users_page,q as setup_links,$r as setup_navigation};
